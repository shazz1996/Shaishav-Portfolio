(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3147,97372],{180549:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(898781),a=n(883119),o=n(925927),l=n(558068),r=n(785893);function s({disableHistory:e,isShopping:t,pinId:n}){const s=(0,i.ZP)(),c=(0,o.k6)(),{previous:d}=(0,l.H)(),u=d.length>0;return(0,r.jsx)(a.hU,{accessibilityLabel:s._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:t?"cancel":"directional-arrow-left",iconColor:"darkGray",onClick:()=>{u&&!e?c.goBack():c.replace(`/pin/${n}/`)},size:"lg",padding:2})}},99739:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(305791),a=n(599611);const o=({initialCropArea:e,pin:t,disableInitialCrop:n,imageSignature:o})=>{let l;if(e)l={...e};else{const{visual_objects:e}=t,{width:r,height:s}=(0,i.Z)({pin:t,imageSignature:o});if(n)l={x:0,y:0,w:r,h:s};else if(e&&e.length){const{x:t,y:n,w:i,h:o}=e[0];l=(0,a.Z)({cropArea:{x:t,y:n,w:i,h:o},scaledWidth:r,scaledHeight:s})}else{const[e,t]=[r/6,s/6],[n,i]=[r-2*e,s-2*t];l={x:e,y:t,w:n,h:i}}}return{x:Math.floor(l.x),y:Math.floor(l.y),w:Math.floor(l.w),h:Math.floor(l.h)}}},341866:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(229428);function a({pin:e}){const{visual_objects:t}=e||{};return(0,i.k)(t||[])}},362810:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(667294),a=n(116303),o=n(31658),l=n(564194),r=n(123987),s=n(149230),c=n(310227),d=n(407043),u=n(883119),h=n(785893);const p={backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"};function g({productPin:e,isTopRow:t,disablePrice:n}){var i,a,o,l;if(!e)return null;const{title:r,description:s,images:c}=e||{},d=null===(i=e.rich_summary)||void 0===i?void 0:i.products,g=d&&d[0]||null,y=((null==g?void 0:g.offer_summary)||{}).price,x=c["474x"]||{};return(0,h.jsxs)(u.zd,{wash:!0,height:t?217:168,width:t?236:117,children:[(0,h.jsx)(u.Ee,{alt:r||s,fit:"cover",naturalHeight:null!==(a=x.height)&&void 0!==a?a:1,naturalWidth:null!==(o=x.width)&&void 0!==o?o:1,src:null!==(l=x.url)&&void 0!==l?l:""}),!!y&&!n&&(0,h.jsx)(u.xu,{margin:1,paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...p}},"data-test-id":"shopping-upsell-price",left:!0,top:!0,position:"absolute",children:y})]})}const y={container:{borderRadius:`${c.Oc}px ${c.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}};function x({dangerouslySetActionUrl:e,query:t,story:n,slotIndex:c}){const{logContextEvent:p}=(0,d.v)(),{action:x,id:f,objects:m,story_type:S,subtitle:_}=n,{text:w,url:v}=x,[b,j]=(0,i.useState)(!1),Z=(0,i.useCallback)((()=>j(!0)),[j]),I=(0,i.useCallback)((()=>j(!1)),[j]),k=["related_domain_collage","related_products_collage"].includes(S)?1:0,A=m[0].domain;let C,P;const $={};$.story_type=S,["search_product_collage_story","shop_article_story"].includes(S)?(C=2,P=43,$.story_id=f,$.entered_query=t):"shop_brand_story"===S||"shop_brand_affinity_story"===S?(C=1,P=92,A&&($.commerce_data=JSON.stringify({domain:A}))):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(S)?(C=72,P=3050):"related_domain_collage"===S?(C=72,P=3455):"related_products_collage"===S&&(C=1,P=3177);const E=_?4:2;let O,D;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(S)){const e=x.user;O=e&&(e.image_medium_url||e.image_large_url),D=e&&e.full_name}const T=e||v,L=(0,s.Z)({url:T})?"nofollow":"none";return(0,h.jsx)(l.Z,{componentType:200,contextLogData:$||{},impressionType:"Story",loggingId:S,slotIndex:c,viewParameter:P,viewType:C,children:(0,h.jsx)(u.iP,{role:"link",rel:L,href:T,onTap:()=>p({event_type:101,element:372,component:200,view_type:C,view_parameter:P,aux_data:{story_type:S}}),children:(0,h.jsxs)(u.xu,{overflow:"hidden",position:"relative",onMouseEnter:Z,onMouseLeave:I,dangerouslySetInlineStyle:{__style:y.container},children:[(0,h.jsxs)(u.xu,{overflow:"hidden",rounding:4,children:[(0,h.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:y.content},children:(0,h.jsx)(g,{productPin:m[k],isTopRow:!0})}),(0,h.jsxs)(u.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,h.jsx)(g,{productPin:m[k+1]}),(0,h.jsx)(g,{productPin:m[k+2]})]})]}),(0,h.jsx)(u.xu,{color:"lightGray",display:"flex",paddingX:3,alignItems:"center",justifyContent:"center",marginTop:2,paddingY:E,rounding:"pill",children:(0,h.jsxs)(u.xu,{justifyContent:"center",alignContent:"start",display:"flex",direction:"column",margin:2,children:[_?(0,h.jsx)(u.xu,{marginBottom:1,children:(0,h.jsx)(u.xv,{align:"start",color:"subtle",children:_.format})}):null,(0,h.jsx)(u.xv,{align:"start",weight:"bold",children:w})]})}),D&&O&&(0,h.jsx)(u.xu,{position:"absolute",right:!0,top:!0,margin:2,children:(0,h.jsx)(a.Z,{name:D,size:"md",src:O,outline:!0})}),(0,h.jsx)(r.Z,{visibility:b?"visible":"none",children:(0,h.jsx)(o.Z,{additionalStyles:y.visualOverlay})})]})})})}},335174:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(483205);const a=e=>`@keyframes shopButtonSlideInThenOut {\n    0% {\n      width: 48px;\n    }\n\n    15% {\n      width: ${e+i.Nv}px;\n    }\n\n    85% {\n      width: ${e+i.Nv}px;\n    }\n\n    100% {\n      width: 40px;\n    }\n  }\n\n  @keyframes shopButtonSlideIn {\n    0% {\n      width: 48px;\n    }\n\n    100% {\n      width: ${e+i.Nv}px;\n    }\n  }\n\n  @keyframes shopButtonSlideOut {\n    0% {\n      width: ${e+i.Nv}px;\n    }\n\n    100% {\n      width: 48px;\n    }\n  }\n\n  @keyframes revealShopText {\n    from {\n      clip-path: inset(0 100% 0 0);\n    }\n    to {\n      clip-path: inset(0 0 0 0);\n    }\n  }\n\n\n  @keyframes stelaSlideIn {\n    0% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 1;\n    }\n}\n\n@keyframes stelaSlideOut {\n    0% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n@keyframes stelaSlideInThenOut {\n    0% {\n        opacity: 0;\n    }\n\n    25% {\n        opacity: 1;\n    }\n\n    50% {\n        opacity: 1;\n    }\n\n    75% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n  `},554383:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(341866),a=n(305791),o=n(599611),l=n(325016),r=n(667294),s=n(335174),c=n(391254),d=n(829407),u=n(112690),h=n(483205),p=n(241244),g=n(883119),y=n(785893);const x={};function f({alwaysShow:e,contextLogData:t,enablePointerEvents:n=!0,imageHeight:i,imageWidth:a,isSelected:o,label:l,labelPressState:f,xPos:m,yPos:S}){const _=(0,r.useRef)(),w=(0,u.Z)();(0,d.Z)((()=>{w({event_type:120,view_type:3,aux_data:{...t},...t})})),(0,r.useEffect)((()=>{x[l]={}}),[l]),(0,r.useEffect)((()=>{const e=_.current&&_.current.getBoundingClientRect().width;x[l].width=e}),[_.current]);const v={backgroundColor:e&&o?"#000":"rgba(255, 255, 255)",zIndex:5,whiteSpace:"nowrap",left:(x[l]||{}).left?-((x[l]||{}).width+h.b9):void 0},b={none:{...v,opacity:0},down:{...v,animation:"stelaSlideIn .3s ease-in-out forwards"},up:{...v,animation:"stelaSlideOut .3s ease-in-out forwards"}},j=(x[l]||{}).width;let Z=m,I=S;return m+j>a?Z=a-j:m<0&&(Z=0),S+33>i?I=i-33:S<0&&(I=0),(0,y.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:I,left:Z}},display:"flex",position:"absolute",children:(0,y.jsxs)(p.N,{enabled:n,children:[(0,y.jsx)(c.Z,{unsafeCSS:(0,s.Z)()}),(0,y.jsx)(g.xu,{ref:_,dangerouslySetInlineStyle:e?{__style:{...v,opacity:(x[l]||{}).width?1:0}}:{__style:(x[l]||{}).width?{...b[f||"none"]}:{opacity:0}},padding:2,position:"relative",rounding:"pill",children:(0,y.jsx)(g.xv,{align:"start",color:e&&o?"inverse":"default",overflow:"normal",size:"200",weight:"bold",children:l})})]})})}var m=n(925927),S=n(65053);const _=()=>{};function w({alwaysShow:e,cropSource:t,currentSpotlightIdx:n,enablePointerEvents:i,handleStelaClick:r,height:s=1,index:c,labelPressState:d,onStelaDotAnimationComplete:p,pin:x,searchQuery:w,stelaDotAnimationType:v,stelaArea:b,trafficSource:j,width:Z=1}){const I=(0,m.k6)(),{selectStela:k}=(0,S.b)(),A=(0,u.Z)(),C={x:((b.label_x||b.x)+b.w/2)*Z,y:((b.label_y||b.y)+b.h/2)*s},P={element:1221,image_signature:x.image_signature,visual_objects:JSON.stringify({x:b.x,y:b.y,w:b.w,h:b.h,object_category:b.label}),pin_id:x.id,commerce_data:JSON.stringify({pin_is_stela:!0})};return(0,y.jsxs)(g.iP,{onMouseEnter:_,onMouseLeave:_,onTap:()=>{if(A(e?{event_type:101,view_type:427,element:P.element,aux_data:{...P}}:{event_type:101,view_type:3,element:P.element,aux_data:{...P}}),e&&r&&b&&c)k({selectedStelaItem:b}),r(c);else if(b&&I){const{height:e,width:t}=(0,a.Z)({pin:x,maxWidth:h.RZ}),n=(0,o.Z)({cropArea:b,scaledWidth:t,scaledHeight:e});let i=`/pin/${x.id}/related-products/?x=${n.x}&y=${n.y}&w=${n.w}&h=${n.h}&entrySource=shopping&cropSource=4`;w&&(i=i.concat(`&q=${w}`)),j&&(i=i.concat(`&rs=${j}`)),k({selectedStelaItem:b}),I.push(i)}},children:[(0,y.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{top:C.y,left:C.x}},display:"flex",position:"absolute","data-test-id":"stela-label-dot",children:("inOut"===v||!b.label&&("down"===d||e)||Z<=400&&e)&&(0,y.jsx)(l.Z,{alwaysShow:e,contextLogData:P,isSelected:b.isSelected,onStelaDotAnimationComplete:p,stelaDotAnimationType:v,imageSignature:x.image_signature,enablePointerEvents:i})}),b.label&&!(e&&Z<=400)&&(0,y.jsx)(f,{alwaysShow:e,contextLogData:P,imageWidth:Z,imageHeight:s,isSelected:b.isSelected,label:b.label,labelPressState:d,xPos:C.x,yPos:C.y,enablePointerEvents:i})]})}function v({alwaysShow:e,cropSource:t,closeupImageHovered:n,currentSpotlightIdx:a,disableSelected:o,enablePointerEvents:l,handleStelaClick:r,height:s,labelPressState:c,onStelaDotAnimationComplete:d,pin:u,searchQuery:h,stelaDotAnimationType:p,trafficSource:x,width:f}){const{stela:m}=(0,S.b)(),_=(0,i.Z)({pin:u}).map((e=>{if(!o&&m.selectedStelaItem){const{x:t,y:n}=m.selectedStelaItem;if(e.x===t&&e.y===n)return{...e,isSelected:!0}}return{...e,isSelected:!1}}));return(0,y.jsx)(g.xu,{height:s,position:"absolute",width:f,dangerouslySetInlineStyle:{__style:"in"===p||n?{backgroundColor:"rgba(0, 0, 0, 0.2)"}:{}},children:_.map(((n,i)=>(0,y.jsx)(w,{alwaysShow:e,cropSource:t,currentSpotlightIdx:a,height:s,index:i,handleStelaClick:r,labelPressState:c,onStelaDotAnimationComplete:d,pin:u,searchQuery:h,stelaDotAnimationType:p,stelaArea:n,trafficSource:x,width:f,enablePointerEvents:l},`${n.x}${n.y}`)))})}},325016:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),a=n(335174),o=n(391254),l=n(112690),r=n(883119),s=n(483205),c=n(241244),d=n(785893);function u({alwaysShow:e,contextLogData:t,enablePointerEvents:n=!0,imageSignature:u,isSelected:h,onStelaDotAnimationComplete:p,stelaDotAnimationType:g}){const[y,x]=(0,i.useState)(!1),f=(0,l.Z)();(0,i.useEffect)((()=>{y||x(!0)}),[]);let m;(0,i.useEffect)((()=>{f({event_type:120,view_type:3,aux_data:{...t},...t})}),[]),"in"===g?m="stelaSlideIn .3s ease-in-out forwards":"out"===g?m="stelaSlideOut .3s ease-in-out forwards":"inOut"===g?m="stelaSlideInThenOut 3s ease-in-out forwards":"none"===g&&(m="none");const S=e?"black":"white",_=e?{opacity:1}:{animation:m,opacity:"none"===m?0:void 0};return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(c.N,{enabled:n,children:[(0,d.jsx)(o.Z,{unsafeCSS:(0,a.Z)()}),(0,d.jsx)(r.xu,{"data-test-id":"closeup-stela-dot",height:s.b9,width:s.b9,onAnimationEnd:()=>{p&&"inOut"===g&&p()},dangerouslySetInlineStyle:{__style:_},children:(0,d.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("g",{filter:"url(#filter0_d)",children:(0,d.jsx)("circle",{cx:"18",cy:"18",fill:h?S:"white",r:"8"})}),(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,d.jsx)("feOffset",{}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,d.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,d.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,d.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}},483205:(e,t,n)=>{n.d(t,{Nv:()=>a,RZ:()=>o,b9:()=>i});const i=36,a=44,o=446},752802:(e,t,n)=>{n.d(t,{Z:()=>a});const i=["564x","736x","orig","474x","236x"],a=({images:e={},resolutionPreferences:t=i})=>{for(const n of t)if(e[n]&&e[n].url)return e[n];return null}},743217:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(752802),a=n(622305),o=n(802933);function l(e){const{images:t={}}=(0,a.Z)((0,o.Z)({pin:e}))||{},n=(0,i.Z)({images:t});return{url:(null==n?void 0:n.url)||"",height:(null==n?void 0:n.height)||1,width:(null==n?void 0:n.width)||1}}},305791:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(752802),a=n(743217);function o(e,t,n=564){return e>n&&(t*=n/e,e=n),{width:e,height:t}}var l=n(835209);const r=({pin:e,maxWidth:t,imageSignature:n})=>{var r,s;const{image_signature:c}=e;if(!n||""===n||c===n){const{width:n,height:i,url:l}=(0,a.Z)(e);return{...o(n,i,t),url:l}}const d=(0,l.Z)({richPinData:e.rich_metadata||e.rich_summary}),u=[...(null==d||null===(r=d.variant_set)||void 0===r||null===(s=r.variants)||void 0===s?void 0:s.flatMap((e=>e.additional_images||[])))||[],...(null==d?void 0:d.additional_images)||[]],{canonical_images:h}=u.find((({image_signature:e})=>n===e))||{},{height:p=1,width:g=1,url:y=""}=(0,i.Z)({images:h||{}})||{};return{...o(g,p,t),url:y}}},622305:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(307061).Z)((e=>{const{pin:t}=e,{images:n}=t,i=Object.keys(n||{}).reduce(((e,t)=>{const i=n[t],{url:a,width:o,height:l}=i;return e&&a&&o&&l?{...e,[t]:{url:a,width:o,height:l}}:null}),{});return i&&Object.keys(i).length>0?{...e,images:i}:null}))},975540:(e,t,n)=>{function i({cropArea:{x:e,y:t,w:n,h:i},scaledWidth:a,scaledHeight:o}){return{x:e/a,y:t/o,w:n/a,h:i/o}}n.d(t,{Z:()=>i})},599611:(e,t,n)=>{function i({cropArea:{x:e=0,y:t=0,w:n=0,h:i=0},scaledWidth:a,scaledHeight:o}){return{h:Math.floor(i*o),w:Math.floor(n*a),x:Math.floor(e*a),y:Math.floor(t*o)}}n.d(t,{Z:()=>i})},94047:(e,t,n)=>{function i({cropArea:{x:e,y:t,w:n,h:i},cropSource:a,searchQuery:o,entrySource:l,trafficSource:r,imageSignature:s}){const c=[];e>=0&&t>=0&&n>=0&&i>=0&&c.push(`x=${e}`,`y=${t}`,`w=${n}`,`h=${i}`),a&&c.push(`cropSource=${a}`),l&&c.push(`entrySource=${l}`),o&&c.push(`q=${o}`),s&&c.push(`imageSignature=${s}`),r&&"unknown"!==r&&c.push(`rs=${r}`);return c.length?`?${c.join("&")}`:""}n.d(t,{Z:()=>i})},297852:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(94047);function a({cropArea:e,cropSource:t,entrySource:n,isUnified:a,imageSignature:o,pinId:l,searchQuery:r,trafficSource:s,view:c}){return`/pin/${l}/${a?"related-products":"visual-search"}/${a||"products"!==c?"":"products/"}${(0,i.Z)({cropArea:e,cropSource:t,entrySource:n,trafficSource:s,searchQuery:r,imageSignature:o})}`}},65053:(e,t,n)=>{n.d(t,{k:()=>d,b:()=>c});var i=n(667294),a=n(425288);const o={selectedStelaItem:null};function l(e=o,t){switch(t.type){case"STELA_SELECT":return{...e,selectedStelaItem:t.payload.selectedStelaItem};default:return e}}var r=n(785893);const{Provider:s,useHook:c}=(0,a.Z)("Stela");function d({children:e}){const[t,n]=(0,i.useReducer)(l,o),a=(0,i.useCallback)((({selectedStelaItem:e})=>{n({type:"STELA_SELECT",payload:{selectedStelaItem:e}})}),[]),c=(0,i.useMemo)((()=>({stela:t,selectStela:a})),[t,a]);return(0,r.jsx)(s,{value:c,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/3147-d98ed9823aba2f46.mjs.map